<!DOCTYPE html>
<html>

<head>
  <link rel="stylesheet" href="css/reveal.css">
  <link rel="stylesheet" href="css/theme/night.css">
  <meta charset="utf-8"/>
</head>

<body>
  <div class="reveal">
    <div class="slides">

<section id="title">
  <h2><em>ansible:</em> agentless systems orchestration</h2>
  Christopher Steel
  <br>
  <span>ACElab Developer Meeting, September 2016</span>
</section>
<section id="history">
  <h2>anisble, <em>roots,</em> and a bit of history</h2>
  <ul>
    <li>Created by Michael DeHaan, (author of <em>Cobbler</em> and co-author <em>Func</em> a framework for remote administration.</li>
    <li>February 20, 2012 - First release (from Michael DeHaan sofa?).</li>
    <li>March 4, 2013     - Founding of AnsibleWorks (ansibleworks.com) as an Open Source company.</li>
    <li>October 16, 2015  - Aquired by Redhat</li>
    <li>May 31st, 2017    - 30,447 commits, 56 branches, 155 releases, 2703 contributors</li>
  </ul>
</section>
<section id="thehype">
  <h2><em>marketing hype: </em>It's automation for everyone!</h2>
Deploy apps, manage systems, crush complexity, build a strong foundation for DevOps, continuous delivery and document your infrastructure with easy to read scripts...
</section>

  <section id="whatitsusedfor">
    <h2><em>Real world usage:</em></h2>
    <ul>
      <li>Provisioning 
      <li>Configuration Management</li>
      <li>Application Deployment</li>
      <li>Continuous Delivery</li>
      <li>Security and Compliance</li>
      <li>Systems Orchestration</li>
      <li>Specific or immediate task execution</li>
    </ul>
  </section>

</section>

  <section id="features">
    <h2><em>Ansibles features:</em></h2>
    <ul>
      <li><em>Idempotent</em> - multiple runs give the same result as the first run*</li>
      <li><em>Uses SSH</em>, Agentless</li>
      <li><em>Push</em> vs. Pull (but Ansible can be used to pull as well)</li>
      <li>Excellent documentation</li>
      <li>Extend with modules in any programming language</li>
      <li>INI, JSON, YAML, Jinja2, paramiko</li>
      <li>Way better than duct tape...</li>
    </ul>
    <p>* In other words, if you do things right you can <em>ensure</em> for a particular state</p>
  </section>

</section>

  <section id="modules">
    <h2><em>A growing list of modules for:</em></h2>
    <ul>
      <li>Cloud</li>
      <li>Clustering</li>
      <li>Commands</li>
      <li>Crypto</li>
      <li>Database</li>
      <li>Files</li>
      <li>Identity</li>
      <li>Inventory</li>
      <li>Messaging</li>
      <li>Monitoring</li>
      <li>Net Tools</li>
    </ul>
    <p>not done just yet...</p>
  </section>

  <section id="moremodules">
    <h2><em>as well as modules for:</em></h2>
    <ul>
      <li>Networking</li>
      <li>Notification</li>
      <li>Packaging</li>
      <li>Remote Management</li>
      <li>Source Control</li>
      <li>Storage</li>
      <li>System</li>
      <li>Utilities</li>
      <li>Web Infrastructure</li>
      <li>Windows</li>
    </ul>
  </section>
</section>

  <section id="cloud modules">
    <h2><em>Cloud Modules:</em></h2>
    <ul>
      <li>Amazon</li>
      <li>Atomic</li>
      <li>Azure</li>
      <li>Centurylink</li>
      <li>Cloudscale</li>
      <li>Cloudstack</li>
      <li>Digital Ocean</li>
      <li>Dimensiondata</li>
      <li>Docker</li>
      <li>Google</li>
      <li>Linode</li>
      <li>Lxc</li>
    </ul>
  </section>

  <section id="morecloudmodules">
    <h2><em>More Cloud Modules:</em></h2>
    <ul>
      <li>Linode</li>
      <li>Lxc</li>
      <li>Lxd</li>
      <li>Misc</li>
      <li>Openstack</li>
      <li>Ovh</li>
      <li>Ovirt</li>
      <li>Packet</li>
      <li>Profitbricks</li>
      <li>Pubnub</li>
      <li>Rackspace</li>
      <li>Smartos</li>
    </ul>
  </section>

  <section id="still more cloud modules">
    <h2><em>Still More Cloud Modules:</em></h2>
    <ul>
      <li>Softlayer</li>
      <li>Univention</li>
      <li>Vmware</li>
      <li>Webfaction</li>
      <li>misc - ovirt</li>
      <li>misc - proxmox</li>
      <li>misc - kjevm</li>
      <li>misc - serverless</li>
      <li>misc - virt</li>
      <li>misc - xenserver</li>
    </ul>
  </section>


<section id="some-trivia">
    <h2>a splash of ansible <em>trivia</em></h2>
    In case you where wondering, The term <em>ansible</em> was coined by Ursula K. Le Guin in her first novel, Rocannon's World (1966). The term has been widely adopted in science fiction and describes a <em>faster-than-light communicator</em>.</section>
  <section id="requirements">
    <h2><em>Requirements</em></h2>
     <ul>
      <li>nodes require Python 2.4+</li>
      <li>SSH</li>
      <li><em>Disposable VMs, cloud servers or containers</em> are highly recommended for developing scripts.</em></li>
    </ul>
  </section>

</section>

<section>
  <section id="similar applications">
    <h2>Other Automation / Orchestration Software</h2>
    Ansible is one of the most recent systems orchestration applications. A number of similar tools exist:
    <p>
    <ul>
      <li>capistrano</li>
      <li>cfengine</li>
      <li>chef</li>
      <li>cobbler - bare metal...</li>
      <li>fabric</li>
      <li>juju</li>
      <li>maas</li>      
      <li>puppet</li>
      <li>rex</li>      
      <li>salt</li>
      <li>spacewalk</li>      

    </ul>
  </section>
</section>

  <section id="playbooks, roles, tasks and handlers">
    <h2>playbooks, roles, tasks, handlers and modules</h2>
    Ansible's <em>buidling blocks</em>
    <p>
    <table>
      <tr>
        <td>Tasks:</td>
        <td>Copy a file, install some stuff, configure a service, get a value</td>
      </tr>
      <tr>
        <td>Playbooks:</td>
        <td>contain tasks, roles and handlers</td>
      </tr>
      <tr>
        <td>Roles:</td>
        <td>worry about these later, start with a playbooks</td>
      </tr>
      <tr>
        <td>Modules:</td>
        <td>ansible comes with many, many modules ranging from network switch configuration to cloud services and clusters.</td>
      </tr>
      <tr>
        <td>Handlers:</td>
        <td>Special tasks, usually used for restarting services<br><small>(sets a flag to restart a service at the end of a playbook)<small></td>
      </tr>
    </table>
  </section>


  <section id="task example">
    <h2>Task example</h2>
    <p>tasks are the basic building blocks of your script. Here we use the <em>lineinfile</em> command from the <em>file module</em></p>
   <pre>
## Configure SSH

- name: "ensure root SSH access is not permitted"
  lineinfile: dest=/etc/ssh/sshd_config
              regexp="^PermitRootLogin"
              line="PermitRootLogin no"
              state=present
  notify: ssh restart
  tags: [ 'security', 'ssh' ]
   </pre>
  </section>

  <section id="playbookexample">
    <h2>Playbook example</h2>
    <p>Playbooks contain tasks, roles and handlers. This playbook has a single "play". It, like most files in Ansible, is a YAML file</p>
   <pre>
---
- hosts: webservers

  vars:

    http_port: 80
    max_clients: 200

  remote_user: root

  tasks:

  - name: ensure apache is at the latest version
    yum: name=httpd state=latest

  - name: write the apache config file
    template: src=/srv/httpd.j2 dest=/etc/httpd.conf
    notify:
    - restart apache

  - name: ensure apache is running (and enable it at boot)
    service: name=httpd state=started enabled=yes
  handlers:

    - name: restart apache
      service: name=httpd state=restarted
   </pre>
  </section>

  <section id="multiplayplaybookexample">
    <h2>Playbook with multiple plays</h2>
    <p>This playbook has a play to configure a webservers and a second play to configure database servers</p>
   <pre>
---
- hosts: webservers
  remote_user: root

  tasks:
  - name: ensure apache is at the latest version
    yum: name=httpd state=latest
  - name: write the apache config file
    template: src=/srv/httpd.j2 dest=/etc/httpd.conf

- hosts: databases
  remote_user: root

  tasks:
  - name: ensure postgresql is at the latest version
    yum: name=postgresql state=latest
  - name: ensure that postgresql is started
    service: name=postgresql state=started
   </pre>
  </section>

  <section id="inventoryfile">
    <h2>Example of an inventory file</h2>
    <p>This is a very basic inventory file example (AKA host file). Inventory files are made up of hosts and groups. They can make use of variables and have other special features</p>
   <pre>
# file: inventory/dev

[deployment_user]
workstation-001 ansible_ssh_user=my_admin_user
workstation-002 ansible_ssh_user=my_admin_user

[firewalls]
workstation-001 ansible_ssh_user=my_deployment_user
workstation-002

[workstations]
workstation-001 
workstation-002

[researchers]
workstation-001

[developers]
workstation-002
   </pre>
  </section>


    </div>
  </div>

  <script src="js/reveal.js"></script>
  <script>
    Reveal.initialize(
    { slideNumber: true, history: true }
    );
  </script>
  <style>
    .reveal pre {
      background: #033;
      padding: 0.2em 0.5em 0.3em 0.5em;
    }
    .reveal em {
      color: yellow;
      font-style: normal; /* yes please! */
    }
    .reveal strong {
      color: #0ff;  /* funny, I'm using RGB with only three digits today */
    }
  </style>
</body>

</html>
